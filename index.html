<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>NYC Weather</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background:#111827;
    color:white;
    padding:20px;
  }

  h2 {
    margin:0 0 15px;
    font-size:26px;
  }

  .container {
    display:flex;
    gap:15px;
  }

  .card {
    flex:1;
    background:#1f2937;
    border-radius:10px;
    padding:15px;
    text-align:center;
  }

  .day {
    font-weight:bold;
    font-size:18px;
    margin-bottom:5px;
  }

  .icon {
    font-size:32px;
    margin:5px 0;
  }

  .cond {
    font-size:14px;
    color:#cbd5e1;
    margin-bottom:8px;
  }

  .temps {
    font-size:16px;
  }

  .hi {
    font-weight:bold;
  }

  .lo {
    color:#cbd5e1;
  }

  .updated {
    margin-top:15px;
    font-size:12px;
    color:#94a3b8;
  }
</style>
</head>
<body>

<h2>NYC 3-Day Forecast</h2>
<div class="container" id="weather">Loading...</div>
<div class="updated" id="updated"></div>

<script>
const url =
  "https://api.open-meteo.com/v1/forecast" +
  "?latitude=40.7128&longitude=-74.0060" +
  "&daily=weathercode,temperature_2m_max,temperature_2m_min" +
  "&temperature_unit=fahrenheit" +
  "&timezone=America/New_York";

function iconFor(code){
  if (code === 0) return "â˜€ï¸";
  if (code === 1) return "ğŸŒ¤ï¸";
  if (code === 2) return "â›…";
  if (code === 3) return "â˜ï¸";
  if ([45,48].includes(code)) return "ğŸŒ«ï¸";
  if ([61,63,65,80,81,82].includes(code)) return "ğŸŒ§ï¸";
  if ([71,73,75].includes(code)) return "ğŸŒ¨ï¸";
  if ([95].includes(code)) return "â›ˆï¸";
  return "ğŸŒ¡ï¸";
}

function descFor(code){
  const map = {
    0:"Sunny", 1:"Mostly Sunny", 2:"Partly Cloudy", 3:"Cloudy",
    61:"Rain", 63:"Rain", 65:"Heavy Rain",
    71:"Snow", 73:"Snow", 75:"Heavy Snow",
    95:"Thunderstorm"
  };
  return map[code] || "Mixed";
}

async function loadWeather(){
  const res = await fetch(url);
  const data = await res.json();

  const container = document.getElementById("weather");
  container.innerHTML = "";

  for (let i=0; i<3; i++){
    const d = new Date(data.daily.time[i] + "T00:00:00");
    const dayName = d.toLocaleDateString("en-US", { weekday:"short" });
    const hi = Math.round(data.daily.temperature_2m_max[i]);
    const lo = Math.round(data.daily.temperature_2m_min[i]);
    const code = data.daily.weathercode[i];

    container.innerHTML += `
      <div class="card">
        <div class="day">${dayName}</div>
        <div class="icon">${iconFor(code)}</div>
        <div class="cond">${descFor(code)}</div>
        <div class="temps">
          <div class="hi">${hi}Â°F</div>
          <div class="lo">${lo}Â°F</div>
        </div>
      </div>
    `;
  }

  document.getElementById("updated").textContent =
    "Updated: " + new Date().toLocaleTimeString();
}

loadWeather();
setInterval(loadWeather, 3600000);
</script>

</body>
</html>
